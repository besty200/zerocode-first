from abc import ABC, abstractmethod


# --- –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –¥–ª—è –æ—Ä—É–∂–∏—è (–û—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è) ---

class Weapon(ABC):
    """
    –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –≤–∏–¥–æ–≤ –æ—Ä—É–∂–∏—è.
    –û–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–Ω—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã –æ—Ä—É–∂–∏—è.
    """

    @abstractmethod
    def attack(self, target: 'Monster') -> str:
        """
        –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –∞—Ç–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –ø–æ–¥–∫–ª–∞—Å—Å–∞—Ö.
        """
        pass


# --- –®–∞–≥ 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—Ä—É–∂–∏—è ---

class Sword(Weapon):
    """
    –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ä—É–∂–∏—è: –ú–µ—á.
    –ù–∞–Ω–æ—Å–∏—Ç –æ–±—ã—á–Ω—ã–π –ø—Ä—è–º–æ–π —É—Ä–æ–Ω.
    """

    def attack(self, target: 'Monster') -> str:
        damage = 15
        target.take_damage(damage)
        return f"‚öîÔ∏è –ë–æ–µ—Ü –Ω–∞–Ω–æ—Å–∏—Ç **–ø—Ä—è–º–æ–π —É–¥–∞—Ä –º–µ—á–æ–º**! –£—Ä–æ–Ω: {damage}."


class Bow(Weapon):
    """
    –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ä—É–∂–∏—è: –õ—É–∫.
    –ù–∞–Ω–æ—Å–∏—Ç –Ω–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–∏–π —É—Ä–æ–Ω, –Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç "—Å—Ç—Ä–µ–ª—ã".
    """

    def attack(self, target: 'Monster') -> str:
        damage = 10
        target.take_damage(damage)
        return f"üèπ –ë–æ–µ—Ü –≤—ã–ø—É—Å–∫–∞–µ—Ç **—Å—Ç—Ä–µ–ª—É –∏–∑ –ª—É–∫–∞**! –£—Ä–æ–Ω: {damage}. (–î–∞–ª—å–Ω–æ–±–æ–π–Ω–∞—è –∞—Ç–∞–∫–∞)"


# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ—Ä—É–∂–∏—è (–ü—Ä–æ–≤–µ—Ä–∫–∞ OCP - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ Fighter)
class Axe(Weapon):
    """
    –ù–æ–≤—ã–π —Ç–∏–ø –æ—Ä—É–∂–∏—è: –¢–æ–ø–æ—Ä.
    –ù–∞–Ω–æ—Å–∏—Ç –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–Ω, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.
    """

    def attack(self, target: 'Monster') -> str:
        damage = 20
        target.take_damage(damage)
        return f"ü™ì –ë–æ–µ—Ü –¥–µ–ª–∞–µ—Ç **–º–æ—â–Ω—ã–π –≤–∑–º–∞—Ö —Ç–æ–ø–æ—Ä–æ–º**! –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –£–†–û–ù: {damage}."


# --- –ö–ª–∞—Å—Å –ú–æ–Ω—Å—Ç—Ä–∞ ---

class Monster:
    """
    –ü—Ä–æ—Å—Ç–æ–π –∫–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –º–æ–Ω—Å—Ç—Ä–∞ —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º.
    """

    def __init__(self, name: str, health: int):
        self.name = name
        self.health = health
        print(f"–ü–æ—è–≤–∏–ª—Å—è –º–æ–Ω—Å—Ç—Ä: **{self.name}** (–ó–¥–æ—Ä–æ–≤—å–µ: {self.health})")

    def take_damage(self, damage: int):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞."""
        self.health -= damage
        if self.health < 0:
            self.health = 0

    def is_defeated(self) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞, –ø–æ–±–µ–∂–¥–µ–Ω –ª–∏ –º–æ–Ω—Å—Ç—Ä."""
        return self.health <= 0


# --- –®–∞–≥ 3: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ Fighter (–ó–∞–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –æ—Ä—É–∂–∏—è) ---

class Fighter:
    """
    –ö–ª–∞—Å—Å –ë–æ–π—Ü–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç Weapon –¥–ª—è –∞—Ç–∞–∫–∏.
    –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ Weapon, –∞ –Ω–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ (Sword, Bow, Axe).
    """

    def __init__(self, name: str, initial_weapon: Weapon):
        self.name = name
        self.weapon = initial_weapon
        print(f"\n‚ö° –ë–æ–µ—Ü **{self.name}** –≥–æ—Ç–æ–≤ –∫ –±–æ—é.")
        self._print_current_weapon()

    def _print_current_weapon(self):
        """–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –≤—ã–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—Ä—É–∂–∏–∏."""
        print(f"–ë–æ–µ—Ü —ç–∫–∏–ø–∏—Ä–æ–≤–∞–Ω: **{self.weapon.__class__.__name__}**.")

    def change_weapon(self, new_weapon: Weapon):
        """
        –ú–µ—Ç–æ–¥ –¥–ª—è —Å–º–µ–Ω—ã –æ—Ä—É–∂–∏—è.
        –ë–æ–µ—Ü –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –ª—é–±–æ–µ –æ—Ä—É–∂–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç Weapon.
        """
        self.weapon = new_weapon
        self._print_current_weapon()

    def attack(self, target: Monster):
        """
        –ú–µ—Ç–æ–¥ –∞—Ç–∞–∫–∏. –û–Ω –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É –æ—Ä—É–∂–∏—è.
        –ï—Å–ª–∏ –º—ã –¥–æ–±–∞–≤–∏–º 100 –Ω–æ–≤—ã—Ö –≤–∏–¥–æ–≤ –æ—Ä—É–∂–∏—è, —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è.
        """
        attack_log = self.weapon.attack(target)
        print(attack_log)

        if target.is_defeated():
            print(f"üéâ –ú–æ–Ω—Å—Ç—Ä **{target.name}** –ø–æ–≤–µ—Ä–∂–µ–Ω!")
        else:
            print(f"–ú–æ–Ω—Å—Ç—Ä **{target.name}** –≤—ã–∂–∏–≤–∞–µ—Ç. (–û—Å—Ç–∞–ª–æ—Å—å –∑–¥–æ—Ä–æ–≤—å—è: {target.health})")

        print("---")


# --- –®–∞–≥ 4: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—è (–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è OCP) ---

def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –±–æ—è."""

    # 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    fighter = Fighter("–ê—Ä–∞–≥–æ—Ä–Ω", Sword())

    # 2. –ë–æ–π —Å –ú–µ—á–æ–º
    monster_1 = Monster("–ì–æ–±–ª–∏–Ω", 36)

    print("\n\n=== –°–¶–ï–ù–ê–†–ò–ô 1: –ë–æ–π —Å –ú–µ—á–æ–º ===")

    # –ê—Ç–∞–∫–∞ 1
    fighter.attack(monster_1)

    # –°–º–µ–Ω–∞ –æ—Ä—É–∂–∏—è
    fighter.change_weapon(Bow())

    # –ê—Ç–∞–∫–∞ 2 (–°–º–µ–Ω–∞ –æ—Ä—É–∂–∏—è –Ω–µ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ Fighter)
    fighter.attack(monster_1)

    # 3. –ë–æ–π —Å –õ—É–∫–æ–º
    monster_2 = Monster("–û—Ä–∫", 50)

    print("\n\n=== –°–¶–ï–ù–ê–†–ò–ô 2: –ë–æ–π —Å –õ—É–∫–æ–º ===")

    # –ê—Ç–∞–∫–∞ (–õ—É–∫)
    fighter.attack(monster_2)

    # 4. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è OCP: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ—Ä—É–∂–∏—è (–¢–æ–ø–æ—Ä),
    # –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è Fighter –∏–ª–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –±–æ—è

    fighter.change_weapon(Axe())

    # –ù–æ–≤—ã–π –º–æ–Ω—Å—Ç—Ä
    monster_3 = Monster("–¢—Ä–æ–ª–ª—å", 140)

    print("\n\n=== –°–¶–ï–ù–ê–†–ò–ô 3: –ë–æ–π —Å –¢–æ–ø–æ—Ä–æ–º (–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è OCP) ===")

    # –ê—Ç–∞–∫–∞ (–¢–æ–ø–æ—Ä)
    fighter.attack(monster_3)

    # –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∞—Ç–∞–∫–∞
    fighter.attack(monster_3)


if __name__ == "__main__":
    main()
